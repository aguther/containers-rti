---
- hosts:
    - centos
  roles:
    - os/hostname
    - os/hosts
    - os/proxy
    - os/chrony
    - os/selinux/not-enforcing
    - os/firewall/disable
    - os/swap/disable
  tags:
    - prepare

- hosts:
    - centos
  roles:
    - docker/el7
  tags:
    - docker

- hosts:
    - centos
  roles:
    - os/proxy/docker
  tags:
    - prepare

- hosts:
    - centos
  roles:
    - docker/registry
  tags:
    - docker-registry

- hosts:
    - centos
  roles:
    - kubernetes
    - weave/net/kubernetes
  tags:
    - kubernetes

- hosts:
    - master[0]
  roles:
    - kubernetes/wait-ready
    - kubernetes/dashboard
  tags:
    - kubernetes
    - dashboard

- hosts:
    - master[0]
  vars:
    - helm_version: 2.10.0
  roles:
    - helm
  tags:
    - helm

- hosts:
    - master[0]
  roles:
    - metallb
  tags:
    - metallb
