---
- include_tasks: prepare.yml
  tags:
    - kubernetes
    - kubernetes-prepare

- include_tasks: get-status.yml
  tags:
    - kubernetes
    - kubernetes-init

- include_tasks: init.yml
  when: ('master' in group_names)
  tags:
    - kubernetes
    - kubernetes-init

- include_tasks: join.yml
  when: ('nodes' in group_names)
        or (inventory_hostname == groups['master'][0])
  tags:
    - kubernetes
    - kubernetes-join
