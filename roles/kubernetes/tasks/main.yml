---
- include_role:
    name: kubernetes/get-status
  tags:
    - kubernetes
    - kubernetes-init

- include_tasks: init.yml
  when: ('masters' in group_names)
  tags:
    - kubernetes
    - kubernetes-init

- include_tasks: join.yml
  when: ('nodes' in group_names)
        or (inventory_hostname == groups['masters'][0])
  tags:
    - kubernetes
    - kubernetes-join
