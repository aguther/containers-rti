---
- include: prepare.yml
  tags:
    - kubernetes
    - kubernetes-prepare

- include: get-status.yml
  when: (inventory_hostname == groups['master'][0])
  tags:
    - kubernetes
    - kubernetes-init

- include: init.yml
  when: (hostvars[groups['master'][0]].kubeadm_deployed == false)
  tags:
    - kubernetes
    - kubernetes-init

- include: join.yml
  tags:
    - kubernetes
    - kubernetes-join
